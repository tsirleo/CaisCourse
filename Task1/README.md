# Ошибка типа «переполнение буфера»

## Подзадачи 

Для каждого из примеров (1, 2) необходимо решить четыре подзадачи.

### Подзадача 1: минимальная длина ввода для перезаписи адреса возврата

В рамках данной подзадачи необходимо установить минимальную длину входного файла, при которой перезаписывается хотя бы один байт адреса возврата уязвимой функции. 

### Подзадача 2: диаграмма стека уязвимой функции

В рамках данной подзадачи необходимо определить адреса следующих объектов в фрейме уязвимой функции: сохранённого адреса возврата, «канарейки» (в примере 2), перезаписываемого указателя на функцию (в примере 2) и адреса уязвимого буфера. 

### Подзадача 3: передача управления на другую функцию

В рамках данной подзадачи необходимо подготовить входной файл, который, при подаче его уязимой программе, реализует переполнение буфера и изменяет поведение программы так, чтобы управление оказалось передано на функцию **_success_**. 

Показателем успешного выполнения данной подзадачи является выдача уязвимой программой сообщения:

```shell
$ ./01.sh my-input-file
Congratulations! You have successfully diverted control to another function.
Now try to craft shellcode.
```

### Подзадача 4: эксплуатация с шелл-кодом

Данная подзадача является завершающей. Необходимо подготовить входной файл, который, при подаче его уязвимой программе, реализует переполнение буфера и изменяет поведение программы так, чтобы она запустила командный интерпретатор **_/bin/sh_**. 

Показателем успешного выполнения данной подзадачи является запуск командной оболочки вместо завершения работы уязвимой программы.

Рекомендуется (но не обязательно) использовать 30-байтовый шелл-код следующего содержания: 

```
48 31 D2 48 BB 2F 2F 62 69 6E 2F 73 68 48 C1 EB 08 53 48 89 E7 50 57 48 89 E6 B0 3B 0F 05
```

## Необходимые инструменты и полезные команды

Для выполнения задания следует использовать инструменты **_gdb_** (через скрипты-обёртки), **nm** (для получения адресов функций), **_objdump_** (для дизассемблирования текста программы).

Для формирования входного файла можно пользоваться командами **_echo_**, **_tr_**, **_head_**, либо любым удобным языком программирования. Примеры полезных команд для формирования файла приведены далее:

```shell
$ # Дописать в конец файла три байта 48 31 D2
$ echo -ne "\x48\x31\xD2" >> my-input-file
$ # Дописать в конец файла 200 случайных алфавитно-цифровых байтов
$ tr -dc A-Za-z0-9 < /dev/urandom | head -c 200 >> my-input-file
```

## Запуск программ

Для запуска программ используйте скрипты **01.sh**, **01-gdb.sh**, **02.sh**, **02-gdb.sh**.

Скрипты принимают в качестве аргумента имя файла, которое будет передано уязвимой программе. Примеры использования:

```shell
$ ./01.sh my-input-file
$ ./02-gdb.sh my-input-file
```
